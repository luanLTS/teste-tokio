<div>
    <h1>Clientes</h1>
    <mat-accordion *ngFor="let cliente of clientes">
        <mat-expansion-panel [expanded]="step === cliente.id" (opened)="setStep(cliente.id)" hideToggle>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    {{cliente.firstName}} {{cliente.lastName}}
                </mat-panel-title>
                <mat-panel-description class="d-flex justify-content-between">
                    <span>{{cliente.email}}</span>
                    <div>
                        <a [routerLink]="'/criar-cliente/'+cliente.id">
                            <mat-icon>edit</mat-icon>
                        </a>
                        <mat-icon (click)="onDeleteUsuario(cliente.id)">delete</mat-icon>
                    </div>
                </mat-panel-description>
            </mat-expansion-panel-header>
            <table *ngIf="step === cliente.id" mat-table [dataSource]="enderecos" class="mat-elevation-z1 w-100">
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef> ID </th>
                    <td mat-cell *matCellDef="let e"> {{e.id}} </td>
                </ng-container>
                <ng-container matColumnDef="address">
                    <th mat-header-cell *matHeaderCellDef> Logradouro </th>
                    <td mat-cell *matCellDef="let e"> {{e.address}} </td>
                </ng-container>
                <ng-container matColumnDef="number">
                    <th mat-header-cell *matHeaderCellDef> Número </th>
                    <td mat-cell *matCellDef="let e"> {{e.number}} </td>
                </ng-container>
                <ng-container matColumnDef="complement">
                    <th mat-header-cell *matHeaderCellDef> Complemento </th>
                    <td mat-cell *matCellDef="let e"> {{e.complement}} </td>
                </ng-container>
                <ng-container matColumnDef="state">
                    <th mat-header-cell *matHeaderCellDef> Estado </th>
                    <td mat-cell *matCellDef="let e"> {{e.state}} </td>
                </ng-container>
                <ng-container matColumnDef="city">
                    <th mat-header-cell *matHeaderCellDef> Cidade </th>
                    <td mat-cell *matCellDef="let e"> {{e.city}} </td>
                </ng-container>
                <ng-container matColumnDef="postalCode">
                    <th mat-header-cell *matHeaderCellDef> CEP </th>
                    <td mat-cell *matCellDef="let e"> {{e.postalCode}} </td>
                </ng-container>
                <ng-container matColumnDef="country">
                    <th mat-header-cell *matHeaderCellDef> País </th>
                    <td mat-cell *matCellDef="let e"> {{e.country}} </td>
                </ng-container>
                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef> Ações </th>
                    <td mat-cell *matCellDef="let e">
                        <a [routerLink]="'/criar-endereco/'+e.id">
                            <mat-icon>edit</mat-icon>
                        </a>
                        <mat-icon (click)="onDeleteEndereco(e.id)">delete</mat-icon>
                    </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="colunas"></tr>
                <tr mat-row *matRowDef="let row; columns: colunas;"></tr>
            </table>
        </mat-expansion-panel>
    </mat-accordion>
</div>